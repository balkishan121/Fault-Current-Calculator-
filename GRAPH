import org.jfree.chart.*;
import org.jfree.chart.plot.*;
import org.jfree.data.category.DefaultCategoryDataset;
import javax.swing.JPanel;

// Method to generate a Fault Current vs Impedance graph
private void showGraph() {
    try {
        double mvaBase = Double.parseDouble(txtMVA.getText());
        double voltage = Double.parseDouble(txtVoltage.getText());

        DefaultCategoryDataset dataset = new DefaultCategoryDataset();

        // Create some sample impedance values
        double[] impedances = {0.1, 0.15, 0.2, 0.25, 0.3, 0.35, 0.4};

        for (double z : impedances) {
            double faultMVA = mvaBase / z;
            double faultCurrentKA = (faultMVA * 1000.0) / (Math.sqrt(3.0) * voltage);
            dataset.addValue(faultCurrentKA, "Fault Current (kA)", String.format("%.2f", z));
        }

        // Create the chart
        JFreeChart chart = ChartFactory.createLineChart(
                "Fault Current vs Impedance",
                "Impedance (pu)",
                "Fault Current (kA)",
                dataset,
                PlotOrientation.VERTICAL,
                true, true, false);

        ChartPanel chartPanel = new ChartPanel(chart);
        chartPanel.setPreferredSize(new java.awt.Dimension(500, 350));

        // Display the chart in a dialog box
        JFrame chartFrame = new JFrame("Fault Current Graph");
        chartFrame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        chartFrame.getContentPane().add(chartPanel);
        chartFrame.pack();
        chartFrame.setLocationRelativeTo(this);
        chartFrame.setVisible(true);

    } catch (Exception ex) {
        JOptionPane.showMessageDialog(this, "Enter valid inputs first!", "Error", JOptionPane.ERROR_MESSAGE);
    }
}
